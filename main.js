!function(){"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(){var e;t.g.importScripts&&(e=t.g.location+"");var s=t.g.document;if(!e&&s&&(s.currentScript&&(e=s.currentScript.src),!e)){var r=s.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&!e;)e=r[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e}();var e=t.p+"4ebdd02c8b9e8d2bdbda.svg",s=t.p+"1e87384d57b62f4e3177.svg",r=t.p+"8fe3c801b0bfacdcbe36.svg",i=t.p+"8244679b60b6a0a051fa.svg",n=t.p+"33d5804fb969aba2da67.svg",c=t.p+"b61bbd844f24037f7726.svg";class a{constructor(t){this.parentEl=t,this.onSubmit=this.onSubmit.bind(this),this.onInput=this.onInput.bind(this),this.cardSystems=[["visa",e,[4]],["mastercard",s,[5]],["american-express",r,[37]],["discover",i,[60,65]],["jcb",n,[35]],["mir",c,[22]]],this.currentCardSystem=null}static markup(t){const e=document.createElement("form");e.classList.add("card-form-widget");const s=document.createElement("div");let r;s.classList.add("card-system-icons"),t.forEach((t=>{r=document.createElement("img"),r.classList.add("card-system-item","grey",t[0]),r.src=t[1],r.alt=t[0],s.appendChild(r)})),e.appendChild(s);const i=document.createElement("div");return i.classList.add("control"),i.innerHTML='\n            <label for="card-input"></label>\n            <input type="text" id="card-input" class="input">\n            <button class="submit">Click to validate</button>\n        ',e.appendChild(i),e}static get submitSelector(){return".submit"}static get inputSelector(){return".input"}static get imgSelector(){return".card-system-item"}static get selector(){return".card-form-widget"}bindToDOM(){this.parentEl.append(a.markup(this.cardSystems)),this.element=this.parentEl.querySelector(a.selector),this.cardSystemElements=this.element.querySelectorAll(a.imgSelector),this.submit=this.element.querySelector(a.submitSelector),this.input=this.element.querySelector(a.inputSelector),this.input.addEventListener("input",this.onInput),this.element.addEventListener("submit",this.onSubmit)}onSubmit(t){t.preventDefault(),!function(t){const e=t.toString().replace(/\D/g,"").split("").map(Number);let s=0,r=!1;for(let t=e.length-1;t>=0;t--){let i=e[t];r&&(i*=2,i>9&&(i-=9)),s+=i,r=!r}return s%10==0}(this.input.value)?this.input.classList.remove("valid"):this.input.classList.add("valid")}onInput(t){t.preventDefault();const e=this.input.value;let s,r=this.cardSystems;if(s=function(t,e){let s;if(!t)return;const r=t.replace(/[+ ()]/g,"");return e.some((t=>{t[2].some((e=>{if(r.startsWith(e))return console.log(t[0]),void(s=t[0])}))})),s}(e,r),console.log(s),!s)return this.currentCardSystem&&!this.currentCardSystem.classList.contains("grey")&&this.currentCardSystem.classList.add("grey"),void(this.currentCardSystem=null);this.cardSystemElements.forEach((t=>{t.classList.contains(s)&&(t.classList.remove("grey"),this.currentCardSystem=t)}))}}const o=document.querySelector(".container");new a(o).bindToDOM()}();
//# sourceMappingURL=main.js.map